/* Test frexp.
   Copyright (C) 1997-2021 Free Software Foundation, Inc.
   This file is part of the GNU C Library.

   The GNU C Library is free software; you can redistribute it and/or
   modify it under the terms of the GNU Lesser General Public
   License as published by the Free Software Foundation; either
   version 2.1 of the License, or (at your option) any later version.

   The GNU C Library is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
   Lesser General Public License for more details.

   You should have received a copy of the GNU Lesser General Public
   License along with the GNU C Library; if not, see
   <https://www.gnu.org/licenses/>.  */

#include "libm-test-driver.c"

static const struct test_f_f1_data frexp_test_data[] =
  {
    { "inf", plus_infty, { plus_infty, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { plus_infty, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { plus_infty, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { plus_infty, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 } },
    { "-inf", minus_infty, { minus_infty, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { minus_infty, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { minus_infty, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { minus_infty, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 } },
    { "qNaN", qnan_value, { qnan_value, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { qnan_value, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { qnan_value, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { qnan_value, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 } },
    { "-qNaN", -qnan_value, { qnan_value, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { qnan_value, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { qnan_value, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 }, { qnan_value, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 0, 0 } },
    { "sNaN", snan_value, { qnan_value, TEST_SNAN|NO_INEXACT_EXCEPTION|INVALID_EXCEPTION, 0, 0 }, { qnan_value, TEST_SNAN|NO_INEXACT_EXCEPTION|INVALID_EXCEPTION, 0, 0 }, { qnan_value, TEST_SNAN|NO_INEXACT_EXCEPTION|INVALID_EXCEPTION, 0, 0 }, { qnan_value, TEST_SNAN|NO_INEXACT_EXCEPTION|INVALID_EXCEPTION, 0, 0 } },
    { "-sNaN", -snan_value, { qnan_value, TEST_SNAN|NO_INEXACT_EXCEPTION|INVALID_EXCEPTION, 0, 0 }, { qnan_value, TEST_SNAN|NO_INEXACT_EXCEPTION|INVALID_EXCEPTION, 0, 0 }, { qnan_value, TEST_SNAN|NO_INEXACT_EXCEPTION|INVALID_EXCEPTION, 0, 0 }, { qnan_value, TEST_SNAN|NO_INEXACT_EXCEPTION|INVALID_EXCEPTION, 0, 0 } },

    { "0.0", LIT (0.0), { LIT (0.0), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, LIT (0.0) }, { LIT (0.0), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, LIT (0.0) }, { LIT (0.0), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, LIT (0.0) }, { LIT (0.0), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, LIT (0.0) } },
    { "-0", minus_zero, { minus_zero, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, LIT (0.0) }, { minus_zero, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, LIT (0.0) }, { minus_zero, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, LIT (0.0) }, { minus_zero, NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, LIT (0.0) } },

    { "12.8", LIT (12.8), { LIT (0.8), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 4 }, { LIT (0.8), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 4 }, { LIT (0.8), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 4 }, { LIT (0.8), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 4 } },
    { "-27.34", LIT (-27.34), { LIT (-0.854375), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 5 }, { LIT (-0.854375), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 5 }, { LIT (-0.854375), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 5 }, { LIT (-0.854375), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 5 } },
    { "0.25", LIT (0.25), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1 } },
    { "0.5", LIT (0.5), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 } },
    { "1.0", LIT (1.0), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 } },
    { "-1.0", LIT (-1.0), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 } },
    { "2.0", LIT (2.0), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 2 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 2 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 2 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 2 } },
    { "4.0", LIT (4.0), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 3 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 3 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 3 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 3 } },
    { "0x1p127", LIT (0x1p127), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 128 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 128 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 128 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 128 } },
    { "-0x1p127", LIT (-0x1p127), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 128 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 128 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 128 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 128 } },
    { "0x1p-126", LIT (0x1p-126), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -125 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -125 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -125 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -125 } },
    { "0x1p-127", LIT (0x1p-127), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -126 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -126 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -126 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -126 } },
    { "0x1p-149", LIT (0x1p-149), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -148 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -148 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -148 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -148 } },
    { "-0x1p-149", LIT (-0x1p-149), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -148 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -148 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -148 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -148 } },
#if !TEST_COND_binary32
    { "0x1p1023", LIT (0x1p1023), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1024 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1024 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1024 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1024 } },
    { "-0x1p1023", LIT (-0x1p1023), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1024 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1024 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1024 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1024 } },
    { "0x1p-1022", LIT (0x1p-1022), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1021 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1021 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1021 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1021 } },
    { "0x1p-1023", LIT (0x1p-1023), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1022 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1022 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1022 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1022 } },
    { "0x1p-1074", LIT (0x1p-1074), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1073 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1073 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1073 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1073 } },
    { "-0x1p-1074", LIT (-0x1p-1074), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1073 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1073 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1073 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -1073 } },
#endif
#if MIN_EXP <= -16381
    { "0x1p16383", LIT (0x1p16383), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 16384 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 16384 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 16384 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 16384 } },
    { "-0x1p16383", LIT (-0x1p16383), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 16384 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 16384 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 16384 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 16384 } },
    { "0x1p-16382", LIT (0x1p-16382), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16381 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16381 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16381 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16381 } },
    { "0x1p-16383", LIT (0x1p-16383), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16382 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16382 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16382 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16382 } },
    { "0x1p-16445", LIT (0x1p-16445), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16444 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16444 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16444 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16444 } },
    { "-0x1p-16445", LIT (-0x1p-16445), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16444 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16444 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16444 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16444 } },
# if MANT_DIG >= 113
    { "0x1p-16494", LIT (0x1p-16494), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16493 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16493 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16493 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16493 } },
    { "-0x1p-16494", LIT (-0x1p-16494), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16493 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16493 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16493 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, -16493 } },
# endif
#endif

#if MANT_DIG >= 106
    { "1.0L - 0x1p-106", LIT (1.0) - LIT (0x1p-106), { LIT (1.0) - LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (1.0) - LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (1.0) - LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (1.0) - LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 } },
    { "1.0", LIT (1.0), { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 } },
    { "1.0L + 0x1p-105", LIT (1.0) + LIT (0x1p-105), { LIT (0.5) + LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5) + LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5) + LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (0.5) + LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 } },
    { "-1.0L + 0x1p-106", LIT (-1.0) + LIT (0x1p-106), { LIT (-1.0) + LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (-1.0) + LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (-1.0) + LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 }, { LIT (-1.0) + LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 0 } },
    { "-1.0", LIT (-1.0), { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 } },
    { "-1.0L - 0x1p-105", LIT (-1.0) - LIT (0x1p-105), { LIT (-0.5) - LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5) - LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5) - LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 }, { LIT (-0.5) - LIT (0x1p-106), NO_INEXACT_EXCEPTION|ERRNO_UNCHANGED, 1, 1 } },
#endif
  };

static void
frexp_test (void)
{
  int x;

  ALL_RM_TEST (frexp, 1, frexp_test_data, RUN_TEST_LOOP_fI_f1, END, x);
}

static void
do_test (void)
{
  frexp_test ();
}

/*
 * Local Variables:
 * mode:c
 * End:
 */
